<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Player</title>
<link href="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.css" rel="stylesheet">
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  #videoPlayer {
    width: 100%;
    height: 100%;
  }
</style>
</head>
<body>
  <input type="url" id="videoUrlInput" placeholder="Enter video URL" required>
  <button onclick="setVideoUrl()">Set Video URL</button>

  <div id="playerContainer">
    <video id="videoPlayer" controls>
      Your browser does not support the video tag.
    </video>
  </div>

  <script src="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js"></script>
  <script>
    function setVideoUrl() {
      const videoUrl = document.getElementById('videoUrlInput').value;
      if (videoUrl) {
        const player = fluidPlayer('videoPlayer', {
            layoutControls: {
                fillToContainer: true,
                primaryColor: "#ff0000",
                posterImage: "" // optional
            }
        });

        player.src = videoUrl;

        const urlParams = new URLSearchParams(window.location.search);
        urlParams.set('video', videoUrl);
        history.replaceState(null, '', window.location.pathname + '?' + urlParams.toString());

        document.getElementById('videoUrlInput').style.display = 'none';
        document.querySelector('button').style.display = 'none';

        const fullscreenConfirmed = confirm("Do you want to view the video in fullscreen?");
        if (fullscreenConfirmed) {
            player.fullscreen.enter();
        }
      } else {
        console.error('No video URL provided.');
      }
    }

    window.onload = function () {
      const urlParams = new URLSearchParams(window.location.search);
      const videoUrl = urlParams.get('video');

      if (videoUrl) {
        const player = fluidPlayer('videoPlayer', {
            layoutControls: {
                fillToContainer: true,
                primaryColor: "#ff0000",
                posterImage: "" // optional
            }
        });

        player.src = videoUrl;

        document.getElementById('videoUrlInput').style.display = 'none';
        document.querySelector('button').style.display = 'none';

        const fullscreenConfirmed = confirm("Do you want to view the video in fullscreen?");
        if (fullscreenConfirmed) {
            player.fullscreen.enter();
        }
      } else {
        console.error('No video URL provided in the query parameter.');
      }
    };
  </script>
</body>
</html>
